2025-04-02 14:58:31 INFO     新运行开始，配置如下:
2025-04-02 14:58:31 INFO     Namespace(input_dir='contracts_to_analyze', wandb_dir=None, max_contracts=0, save_interval=10, num_tests=1, model_type='api', model_name='gpt-3.5-turbo', embedding_model='text-embedding-ada-002', api_key=None, use_local=False, local_model_path=None, device='cpu', http_proxy=None, https_proxy=None, debug=False)
2025-04-02 14:58:31 INFO     Wandb设置完成。
2025-04-02 14:58:31 INFO     使用API模型：通过openai API使用gpt-3.5-turbo，嵌入模型：text-embedding-ada-002
2025-04-02 14:58:31 INFO     使用代理配置：HTTP:http://127.0.0.1:34497, HTTPS:http://127.0.0.1:34497
2025-04-02 14:58:31 INFO     API客户端初始化成功
2025-04-02 14:58:31 INFO     在contracts_to_analyze中找到1个合约文件夹
2025-04-02 14:58:31 INFO     正在处理合约文件夹 1/1: ERC20-USDT
2025-04-02 14:58:31 INFO     找到交易数据文件: export-token-0xdac17f958d2ee523a2206206994597c13d831ec7.csv
2025-04-02 14:58:31 INFO     找到合约文件: TetherToken.sol
2025-04-02 14:58:31 INFO     尝试读取智能合约文件: contracts_to_analyze/ERC20-USDT/TetherToken.sol，大小: 14510 字节
2025-04-02 14:58:31 INFO     合约文件 TetherToken.sol 读取成功，大小：14510字节
2025-04-02 14:58:31 INFO     交易数据文件 export-token-0xdac17f958d2ee523a2206206994597c13d831ec7.csv 读取成功，大小：320字节
2025-04-02 14:58:31 INFO     正在进行测试 1/1
2025-04-02 14:58:31 INFO     正在调用模型生成意图...
2025-04-02 14:58:36 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:58:39 INFO     HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-02 14:58:39 INFO     成功获取意图嵌入向量，维度: 1536
2025-04-02 14:58:39 INFO     已为 ERC20-USDT 生成第 1 次意图，长度: 1658字符
2025-04-02 14:58:39 INFO     [31m>>>> 意图 1 前100个字符: <transaction_analysis>

<contract_interaction>
The transaction is a transfer (method: Transfer) of 2...[0m
2025-04-02 14:58:39 INFO     意图已分解为 5 个部分
2025-04-02 14:58:39 INFO     正在为 contract_interaction 部分生成问题...
2025-04-02 14:58:40 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:58:40 ERROR    解析问题时出错: Expecting value: line 1 column 1 (char 0)
2025-04-02 14:58:40 ERROR    API返回的原始内容: ```json
[
    "What is the purpose of the potential fee deduction in the transfer function of the TetherToken contract?",
    "How does the TetherToken contract ensure the security and accuracy of balance updates during token transfers?",
    "Are there any restrictions or additional checks in place within the transfer function to prevent unauthorized transfers of tokens from one address to another?"
]
```
2025-04-02 14:58:40 INFO     为 contract_interaction 部分成功生成 3 个问题
2025-04-02 14:58:40 INFO     [33m>>>>>>>> contract_interaction 问题 1: ```json...[0m
2025-04-02 14:58:40 INFO     [33m>>>>>>>> contract_interaction 问题 2: [...[0m
2025-04-02 14:58:40 INFO     [33m>>>>>>>> contract_interaction 问题 3:     "What is the purpose of the potential fee deduction in the transfer function of the TetherToken ...[0m
2025-04-02 14:58:40 INFO     正在为 contract_interaction 部分的问题 1 生成答案...
2025-04-02 14:58:44 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:58:45 INFO     为问题生成第1次回答，长度：2071字符，平均logprob：-0.2739603461074333
2025-04-02 14:58:49 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:58:50 INFO     为问题生成第2次回答，长度：1714字符，平均logprob：-0.3546144005798139
2025-04-02 14:58:54 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:58:56 INFO     为问题生成第3次回答，长度：2121字符，平均logprob：-0.2648955729174639
2025-04-02 14:58:56 INFO     正在为 contract_interaction 部分的问题 2 生成答案...
2025-04-02 14:58:59 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:59:00 INFO     为问题生成第1次回答，长度：1673字符，平均logprob：-0.27562886537647113
2025-04-02 14:59:03 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:59:05 INFO     为问题生成第2次回答，长度：1818字符，平均logprob：-0.25534463459458623
2025-04-02 14:59:09 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:59:10 INFO     为问题生成第3次回答，长度：1610字符，平均logprob：-0.14939434265253237
2025-04-02 14:59:10 INFO     正在为 contract_interaction 部分的问题 3 生成答案...
2025-04-02 14:59:14 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:59:15 INFO     为问题生成第1次回答，长度：2283字符，平均logprob：-0.3805188368937155
2025-04-02 14:59:17 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:59:18 INFO     为问题生成第2次回答，长度：1395字符，平均logprob：-0.3206409435089241
2025-04-02 14:59:21 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:59:22 INFO     为问题生成第3次回答，长度：1548字符，平均logprob：-0.3675970749889439
2025-04-02 14:59:22 INFO     正在为 state_changes 部分生成问题...
2025-04-02 14:59:24 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:59:24 INFO     为 state_changes 部分成功生成 3 个问题
2025-04-02 14:59:24 INFO     [33m>>>>>>>> state_changes 问题 1: How is the fee amount determined and applied in the contract? Are there any specific conditions or p...[0m
2025-04-02 14:59:24 INFO     [33m>>>>>>>> state_changes 问题 2: What is the rationale behind the specific addresses involved in the token transfer? Is there a known...[0m
2025-04-02 14:59:24 INFO     [33m>>>>>>>> state_changes 问题 3: Does the increase in balance for address 0x9998368435699c2cD0A86245766C9e8Ea0f5Ae4E trigger any addi...[0m
2025-04-02 14:59:24 INFO     正在为 state_changes 部分的问题 1 生成答案...
2025-04-02 14:59:27 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:59:29 INFO     为问题生成第1次回答，长度：2059字符，平均logprob：-0.3511491652661056
2025-04-02 14:59:32 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:59:33 INFO     为问题生成第2次回答，长度：2037字符，平均logprob：-0.34196902898505144
2025-04-02 14:59:37 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:59:38 INFO     为问题生成第3次回答，长度：2242字符，平均logprob：-0.36415284329846065
2025-04-02 14:59:38 INFO     正在为 state_changes 部分的问题 2 生成答案...
2025-04-02 14:59:45 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:59:46 INFO     为问题生成第1次回答，长度：2268字符，平均logprob：-0.3115419485799597
2025-04-02 14:59:51 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:59:52 INFO     为问题生成第2次回答，长度：2071字符，平均logprob：-0.19518917772697714
2025-04-02 14:59:56 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 14:59:57 INFO     为问题生成第3次回答，长度：1730字符，平均logprob：-0.1942066898491549
2025-04-02 14:59:57 INFO     正在为 state_changes 部分的问题 3 生成答案...
2025-04-02 15:00:02 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:00:04 INFO     为问题生成第1次回答，长度：2154字符，平均logprob：-0.2068491879225164
2025-04-02 15:00:08 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:00:09 INFO     为问题生成第2次回答，长度：1478字符，平均logprob：-0.3110325211825464
2025-04-02 15:00:12 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:00:13 INFO     为问题生成第3次回答，长度：1484字符，平均logprob：-0.2823665161819245
2025-04-02 15:00:13 INFO     正在为 events 部分生成问题...
2025-04-02 15:00:14 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:00:14 INFO     为 events 部分成功生成 3 个问题
2025-04-02 15:00:14 INFO     [33m>>>>>>>> events 问题 1: Can you provide more details on how the fee amount is determined and applied in the Transfer event e...[0m
2025-04-02 15:00:14 INFO     [33m>>>>>>>> events 问题 2: Are there any additional events emitted besides the Transfer event in this transaction, and if so, w...[0m
2025-04-02 15:00:14 INFO     [33m>>>>>>>> events 问题 3: How does the smart contract handle situations where the Transfer event is emitted with the sender's ...[0m
2025-04-02 15:00:14 INFO     正在为 events 部分的问题 1 生成答案...
2025-04-02 15:00:20 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:00:21 INFO     为问题生成第1次回答，长度：1713字符，平均logprob：-0.2038427141486274
2025-04-02 15:00:26 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:00:27 INFO     为问题生成第2次回答，长度：1373字符，平均logprob：-0.2573565851998417
2025-04-02 15:00:33 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:00:34 INFO     为问题生成第3次回答，长度：2006字符，平均logprob：-0.3130103077355307
2025-04-02 15:00:35 INFO     正在为 events 部分的问题 2 生成答案...
2025-04-02 15:00:37 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:00:39 INFO     为问题生成第1次回答，长度：1301字符，平均logprob：-0.21629764407002003
2025-04-02 15:00:43 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:00:44 INFO     为问题生成第2次回答，长度：1350字符，平均logprob：-0.1826760385601061
2025-04-02 15:00:48 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:00:49 INFO     为问题生成第3次回答，长度：1682字符，平均logprob：-0.25410512565908533
2025-04-02 15:00:49 INFO     正在为 events 部分的问题 3 生成答案...
2025-04-02 15:00:52 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:00:54 INFO     为问题生成第1次回答，长度：1759字符，平均logprob：-0.3211818644643174
2025-04-02 15:00:58 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:00:59 INFO     为问题生成第2次回答，长度：2225字符，平均logprob：-0.37866127702709634
2025-04-02 15:01:04 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:01:05 INFO     为问题生成第3次回答，长度：2175字符，平均logprob：-0.2615763615609353
2025-04-02 15:01:05 INFO     正在为 implications 部分生成问题...
2025-04-02 15:01:07 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:01:07 ERROR    解析问题时出错: Expecting value: line 1 column 1 (char 0)
2025-04-02 15:01:07 ERROR    API返回的原始内容: ```json
[
    "How is the potential fee mechanism implemented within the TetherToken contract, and what are the implications of this mechanism on transaction management?",
    "What specific privileges or capabilities does the contract owner have in relation to receiving fees from transactions within the TetherToken contract, and how does this impact the overall ecosystem?",
    "In what ways does the presence of the fee mechanism and the contract owner's role in fee collection potentially affect the decentralization and autonomy of the TetherToken contract, and what measures are in place to ensure integrity and functionality within the ERC20 token standard?"
]
```
2025-04-02 15:01:07 INFO     为 implications 部分成功生成 3 个问题
2025-04-02 15:01:07 INFO     [33m>>>>>>>> implications 问题 1: ```json...[0m
2025-04-02 15:01:07 INFO     [33m>>>>>>>> implications 问题 2: [...[0m
2025-04-02 15:01:07 INFO     [33m>>>>>>>> implications 问题 3:     "How is the potential fee mechanism implemented within the TetherToken contract, and what are th...[0m
2025-04-02 15:01:07 INFO     正在为 implications 部分的问题 1 生成答案...
2025-04-02 15:01:10 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:01:11 INFO     为问题生成第1次回答，长度：1558字符，平均logprob：-0.34082368714118294
2025-04-02 15:01:14 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:01:15 INFO     为问题生成第2次回答，长度：1504字符，平均logprob：-0.42566837489961196
2025-04-02 15:01:19 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:01:21 INFO     为问题生成第3次回答，长度：2495字符，平均logprob：-0.2917655121459232
2025-04-02 15:01:21 INFO     正在为 implications 部分的问题 2 生成答案...
2025-04-02 15:01:24 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:01:25 INFO     为问题生成第1次回答，长度：1396字符，平均logprob：-0.4262243606473412
2025-04-02 15:01:28 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:01:29 INFO     为问题生成第2次回答，长度：1681字符，平均logprob：-0.35698257123769167
2025-04-02 15:01:32 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:01:34 INFO     为问题生成第3次回答，长度：1619字符，平均logprob：-0.37770524709841696
2025-04-02 15:01:34 INFO     正在为 implications 部分的问题 3 生成答案...
2025-04-02 15:01:37 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:01:38 INFO     为问题生成第1次回答，长度：1594字符，平均logprob：-0.4058561907057664
2025-04-02 15:01:41 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:01:43 INFO     为问题生成第2次回答，长度：1670字符，平均logprob：-0.3626925757311898
2025-04-02 15:01:51 INFO     HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-02 15:01:52 INFO     为问题生成第3次回答，长度：2342字符，平均logprob：-0.2732754713596161
2025-04-02 15:01:52 INFO     结果已保存到 /home/hosen/LLM assisted smart contract intent detection/intent_results/wandb/run-20250402_145829-20250402_145827/files/results.pkl
2025-04-02 15:01:52 INFO     结果已直接保存到 /home/hosen/LLM assisted smart contract intent detection/intent_results/run-20250402_145827/files/results.pkl
2025-04-02 15:01:52 INFO     已完成 1 个合约的分析
2025-04-02 15:01:52 INFO     结果已保存到 /home/hosen/LLM assisted smart contract intent detection/intent_results/wandb/run-20250402_145829-20250402_145827/files/results.pkl 和 /home/hosen/LLM assisted smart contract intent detection/intent_results/run-20250402_145827/files/results.pkl
